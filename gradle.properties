android.builder.sdkDownload=true
android.useAndroidX=true

# Performance optimizations for CI/CD and local builds
# Increased heap size from 2g to 4g for optimal performance (GitHub runners have 7GB total)
# 4g heap size selected based on internal testing on GitHub Actions runners (7GB RAM). Optimal value may vary by workload and environment.
org.gradle.jvmargs=-Xmx4g -Xms256m -XX:MaxMetaspaceSize=1g -XX:+HeapDumpOnOutOfMemoryError -XX:+UseParallelGC -Dfile.encoding=UTF-8
org.gradle.daemon=true
org.gradle.parallel=true
org.gradle.caching=true

# Gradle 8+ features
org.gradle.vfs.watch=true
org.gradle.configuration-cache=true
org.gradle.configuration-cache.problems=warn

# Additional build performance settings
# Use workers to parallelize tasks
org.gradle.workers.max=4

# Android-specific optimizations
android.nonTransitiveRClass=true
android.enableR8.fullMode=true
android.experimental.testOptions.emulatorSnapshots.maxSnapshotsForTestFailures=2
android.experimental.androidTest.numManagedDeviceShards=1
android.defaults.buildfeatures.buildconfig=true
android.defaults.buildfeatures.aidl=false
android.defaults.buildfeatures.renderscript=false
android.defaults.buildfeatures.resvalues=false
android.defaults.buildfeatures.shaders=false
# Required for AGP 8.7.3+ - must be true to avoid "Cannot query the value of property 'additionalTestOutputDir'" error
# See docs/cicd/pipeline-optimization.md for details
android.enableAdditionalTestOutput=true
